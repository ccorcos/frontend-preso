<!--
pure and immutable are easier to predict
slice vs splice example
just show the example and explain that its easier and dont be so detailed

what is immutability?

why do we need build tools?
why do we want transpilers?

why and then what

why is react better than angular
picture of the react result
more why with react native

less generic redux example. start with why / problem

why modular component?

- BEM

what is a styleguide. demo before we add it.

-->

<html>
    <head>
        <link rel="stylesheet" href="assets/reveal.js/css/reveal.css">
        <link rel="stylesheet" href="assets/reveal.js/css/theme/night.css">
        <link rel="stylesheet" href="assets/reveal.js/lib/css/zenburn.css">
        <link rel="stylesheet" href="custom.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                  <h2>Frontend Web @ Affirm</h2>
                  <h5>by Chet Corcos (Sept 2016)</h5>
                  <aside class="notes">
                    `f` for full screen
                    `s` for notes
                  </aside>
                </section>
                <section>
                  <h2>Overview</h2>
                  <ul>
                    <li>functional programming</li>
                    <li>build tools</li>
                    <li>react and redux</li>
                    <li>styleguide</li>
                  </ul>
                </section>
                <section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p class="fragment">... in JavaScript</p>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Suppose we have a user that looks like this:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const me = {
  name: {
    first: 'Chet',
    last: 'Corcos',
  },
  birthday: {
    month: 12,
    day: 28,
  },
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Maybe we want to know if today is this user's birthday:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const me = {
//   name: {
//     first: 'Chet',
//     last: 'Corcos',
//   },
//   birthday: {
//     month: 12,
//     day: 28,
//   },
// }

const isBirthday = (user, date) => {
  return date.getMonth() + 1 === user.birthday.month // month is zero indexed
      &amp;&amp; date.getDate() === user.birthday.day
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Maybe we want to format the user info:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const me = {
//   name: {
//     first: 'Chet',
//     last: 'Corcos',
//   },
//   birthday: {
//     month: 12,
//     day: 28,
//   },
// }

const formatUser = user => {
  user.name = user.name.first + user.name.last
  user.birthday = user.birthday.month + '/' + user.birthday.day
  return user
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Let's see if it works:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const today = new Date()

isBirthday(me, today) // false

formatUser(me) // {name: 'Chet Corcos', birthday: '12/18'}

isBirthday(me, today) <span class="fragment">// Error?!</span>
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>The problem is <i>in-place mutation.</i></p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const formatUser = user => {
  // mutated in place
  user.name = user.name.first + user.name.last
  user.birthday = user.birthday.month + '/' + user.birthday.day
  return user
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Let's return a new object instead.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">

// const formatUser = user => {
//   user.name = user.name.first + user.name.last
//   user.birthday = user.birthday.month + '/' + user.birthday.day
//   return user
// }

const formatUser = user => {
  return {
    name: user.name.first + user.name.last,
    birthday: user.birthday.month + '/' + user.birthday.day,
  }
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>And now it works:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const today = new Date()

isBirthday(me, today) // false

formatUser(me) // {name: 'Chet Corcos', birthday: '12/18'}

isBirthday(me, today) // false
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p><strong>Lesson 1:</strong> do not mutate data in-place</p>
                    <ul>
                      <li><a href="https://en.wikipedia.org/wiki/Immutable_object">immutable data</a> is easier to <i>understand</i></li>
                      <li><a href="https://en.wikipedia.org/wiki/Immutable_object">immutable data</a> is easier to <i>predict</i></li>
                      <li><a href="https://en.wikipedia.org/wiki/Immutable_object">immutable data</a> is easier to <i>statically analyze</i></li>
                    </ul>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Suppose we have some data that looks like this:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const loans = [
  {status: 'due', amount: 10},
  {status: 'overdue', amount: 20},
  {status: 'overdue', amount: 30},
]
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Maybe we want to find the total overdue amount:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const loans = [
//   {status: 'due', amount: 10},
//   {status: 'overdue', amount: 20},
//   {status: 'overdue', amount: 30},
// ]

const getTotalOverdueAmount = loans => {
  let total = 0
  for (let i = 0; i < loans.length; i++) {
    if (loans[i].status === 'overdue') {
      total += loans[i].amount
    }
  }
  return total
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>And it works:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const loans = [
//   {status: 'due', amount: 10},
//   {status: 'overdue', amount: 20},
//   {status: 'overdue', amount: 30},
// ]

getTotalOverdueAmount(loans) // 50
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Now there's a new requirement and we want to exclude disputed loans from the calculation.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const loans = [
  {status: 'due', amount: 10, disputed: false},
  {status: 'overdue', amount: 20, disputed: true},
  {status: 'overdue', amount: 30, disputed: false},
]

const getTotalOverdueAmount = loans => {
  let total = 0
  for (let i = 0; i < loans.length; i++) {
    if (loans[i].status === 'overdue') {
      // add a new condition
      if (!loans[i].disputed) {
        total += loans[i].amount
      }
    }
  }
  return total
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>And this works too:</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const loans = [
//   {status: 'due', amount: 10, disputed: false},
//   {status: 'overdue', amount: 20, disputed: true},
//   {status: 'overdue', amount: 30, disputed: false},
// ]

getTotalOverdueAmount(loans) // 30
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>So what's wrong with this code?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const getTotalOverdueAmount = loans => {
  let total = 0
  for (let i = 0; i < loans.length; i++) {
    if (loans[i].status === 'overdue') {
      if (!loans[i].disputed) {
        total += loans[i].amount
      }
    }
  }
  return total
}
                      </code>
                    </pre>
                    <ul class="fragment">
                      <li>Hard to read!</li>
                      <li>This code will rot quickly.</li>
                      <li>This code isn't <i>declarative</i>.</li>
                    </ul>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>What is <a href="https://en.wikipedia.org/wiki/Declarative_programming">declarative</a> programming?</p>
                    <p class="fragment">Say what you want, not how you want it done.</p>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Let's rewrite this code to be <i>more</i> declarative.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const getTotalOverdueAmount = loans => {
//   let total = 0
//   for (let i = 0; i < loans.length; i++) {
//     if (loans[i].status === 'overdue') {
//       total += loans[i].amount
//     }
//   }
//   return total
// }

const getTotalOverdueAmount = loans => {
  const overdueLoans = loans.filter(loan => loan.status === 'overdue')
  const totalAmount = overdueLoans.reduce((total, loan) => total + loan.amount, 0)
  return totalAmount
}
                      </code>
                    </pre>
                    <p class="fragment">We didn't say how to iterate over the list...</p>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>... but we can do even better.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const getTotalOverdueAmount = loans => {
//   const overdueLoans = loans.filter(loan => loan.status === 'overdue')
//   const totalAmount = overdueLoans.reduce((total, loan) => total + loan.amount, 0)
//   return totalAmount
// }

const sum = (a, b) => a + b

const propEq = (prop, value) => obj => obj[prop] === value <span class="fragment">// a curried function!</span>

const getTotalOverdueAmount = loans => {
  const overdueLoans = loans.filter(propEq('status', 'overdue'))
  const totalAmount = overdueLoans.reduce(sum, 0)
  return totalAmount
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>A <a href="https://en.wikipedia.org/wiki/Currying">curried funtion</a> takes its argument's one at a time.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const propEq = prop => value => obj => obj[prop] === value

const isOverdue = propEq('status')('overdue')
// obj => obj['status'] === 'overdue'

const overdueLoans = loans.filter(isOverdue)
                      </code>
                    </pre>
                    <div class="fragment">
                      <p>But some syntactic sugar is OK.</p>
                      <pre>
                        <code data-trim data-noescape class="language-js">
const propEq = (prop, value) => obj => obj[prop] === value

const isOverdue = propEq('status', 'overdue')
                        </code>
                      </pre>
                    </div>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Now let's filter disputed loans as well.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const getTotalOverdueAmount = loans => {
//   const overdueLoans = loans.filter(propEq('status', 'overdue'))
//   const totalAmount = overdueLoans.reduce(sum, 0)
//   return totalAmount
// }

const getTotalOverdueAmount = loans => {
  const overdueLoans = loans.filter(propEq('status', 'overdue'))
  // create a new variable
  const notDiputed = overdueLoans.filter(propEq('disputed', false))
  // filter with the new variable
  const totalAmount = notDiputed.reduce(sum, 0)
  return totalAmount
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>We can still do even better.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const getTotalOverdueAmount = loans => {
//   const overdueLoans = loans.filter(propEq('status', 'overdue'))
//   const notDiputed = overdueLoans.filter(propEq('disputed', false))
//   const totalAmount = notDiputed.reduce(sum, 0)
//   return totalAmount
// }

const filter = fn => list => list.filter(fn)

const reduce = (fn, init) => list => list.reduce(fn, init)

const pipe = fnList => value => fnList.reduce((acc, fn) => fn(acc), value)

const getTotalOverdueAmount = pipe([ <span class="fragment">// a point-free function!</span>
  filter(propEq('status', 'overdue')),
  filter(propEq('disputed', false)),
  reduce(sum, 0),
])
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>What is a <a href="https://en.wikipedia.org/wiki/Tacit_programming">point-free</a> function?</p>
                    <p>"Point-free programming (a.k.a tacit programming) is when a function never identifies its arguments (points) and is intead a specified as composition of other functions."</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const getTotalOverdueAmount = pipe([
  filter(propEq('status', 'overdue')),
  filter(propEq('disputed', false)),
  reduce(sum, 0),
])
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Now our code is declarative, but is it <i>performant</i>?</p>
                    <p>How many times are we iterating through the list?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const getTotalOverdueAmount = pipe([
  filter(propEq('status', 'overdue')), // one
  filter(propEq('disputed', false)),   // two
  reduce(sum, 0),                      // three times!
])
                      </code>
                    </pre>
                    <p class="fragment">We can use <i>generators</i>!</p>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>What's a <a href="https://en.wikipedia.org/wiki/Generator_(computer_programming)">generator</a>?</p>
                    <p>A generator is a function that yields values.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
function *Counter() {
  let id = 0
  while(true) {
    yield id++
  }
}

const counter = new Counter()
counter.next() // {value: 1, done: false}
counter.next() // {value: 2, done: false}
counter.next() // {value: 3, done: false}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Why do we use generators?</p>
                    <p>Generators help us iterate <a href="https://en.wikipedia.org/wiki/Lazy_evaluation">lazily</a> over lists.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const list = [1, 2, 3]

const ListGenerator = new list[Symbol.iterator]

// WARNING: generators are stateful!
const generator = new ListGenerator()

generator.next() // {value: 1, done: false}
generator.next() // {value: 2, done: false}
generator.next() // {value: 3, done: false}
generator.next() // {value: undefined, done: true}

[...ListGenerator] // [1, 2, 3]
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Let's make a lazy filter!</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const lazyFilter = fn => function*(Generator) {
  const generator = new Generator()
  while(true) {
    const result = generator.next()
    if (result.done) {
      break
    }
    if (fn(result.value)) {
      yield result.value
    }
  }
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Let's make a lazy reduce!</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const lazyReduce = (fn, init) => function*(Generator) {
  const generator = new Generator()
  let acc = init
  while(true) {
    const result = generator.next()
    if (result.done) {
      break
    }
    acc = fn(acc, result.value)
    yield acc
  }
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Let's make a lazy pipe!</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const lazyPipe = fnList => iterable => {
  const InputGenerator = new iterable[Symbol.iterable]()
  const OutputGenerator = fnList.reduce((gen, fn) => fn(gen), InputGenerator)
  return [...OutputGenerator]
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>And now we're declarative and performant!</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// const getTotalOverdueAmount = pipe([
//   filter(propEq('status', 'overdue')),
//   filter(propEq('disputed', false)),
//   reduce(sum, 0),
// ])

const getTotalOverdueAmount = lazyPipe([
  lazyFilter(propEq('status', 'overdue')),
  lazyFilter(propEq('disputed', false)),
  lazyReduce(sum, 0),
])
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Now suppose we're manipulating a large amount of data.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const actions = [
  {type: 'click-make-payment', loanAri: 'JJR5-0PLM'},
  {type: 'change-payment-method', instrumentAri: 'AF3S-353H'},
  {type: 'change-amount', value: 'upcoming-count'},
  {type: 'submit-make-payment'}
  // many many more...
]
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>What happens when we want to append an action to this array?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const appendAction = (action) => {
  actions.push(action) <span class="fragment">// NO! That's impure!</span>
}
                       </code>
                      <code data-trim data-noescape class="language-js fragment">
const appendAction = (actions, action) => {
  actions.push(action) <span class="fragment">// NO! That's in-place mutation!</span>
  return actions
}
                       </code>
                       <code data-trim data-noescape class="language-js fragment">
const appendAction = (actions, action) => {
  return [...actions, action] <span class="fragment">// Much better...</span><span class="fragment"> but is it performant?</span>
}
                        </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>Why immutability not performant?</p>
                    <ul>
                      <li>must clone the array just to append an item</li>
                      <li>lots of memory for the garbage collector to clean up</li>
                      <ul><li>aka <a href="https://en.wikipedia.org/wiki/Thrashing_(computer_science)">garbage thrashing</a></li></ul>
                    </ul>
                    <pre>
                       <code data-trim data-noescape class="language-js">
const appendAction = (actions, action) => {
  return [...actions, action]
}
                        </code>
                    </pre>
                    <p class="fragment">We can use <i>persistent data structures</i>!</p>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>What are <a href="https://en.wikipedia.org/wiki/Persistent_data_structure">persistent data structures</a>?</p>
                    <p>Data structures that preseve the previous version of itself when its modified... like a linked-list!</p>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>What is a <i>linked list</i>?</p>
                    <p class="fragment">... just kidding</p>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>How do we use <i>persistent data structures</i> without hating our lives?</p>
                    <div class="fragment">
                      <p>ImmutableJS to the rescue!</p>
                      <pre>
                        <code data-trim data-noescape class="language-js">
import { List } from 'immutable'

const actions = new List([
  {type: 'click-make-payment', loanAri: 'JJR5-0PLM'},
  {type: 'change-payment-method', instrumentAri: 'AF3S-353H'},
  {type: 'change-amount', value: 'upcoming-count'},
  {type: 'submit-make-payment'}
  // many many more...
])

const trackAction = (actions, action) => {
  return actions.push(action)
}
                        </code>
                      </pre>
                    </div>
                  </section>
                  <section>
                    <h2>Functional Programming</h2>
                    <p>ImmutableJS has all kinds of persistent data structures.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
import { Map } from 'immutable'

const me = new Map({
  name: new Map({
    first: 'Chet',
    last: 'Corcos',
  }),
  birthday: new Map({
    month: 12,
    day: 28,
  })
})

me.getIn(['name', 'first']) // 'Chet'
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Extra Resources</h2>
                    <ul>
                      <li><a href="http://fr.umio.us/why-ramda/">"Why Ramda?"</a> -- about currying, function composition, and point-free programming</li>
                      <li><a href="https://drboolean.gitbooks.io/mostly-adequate-guide/content/">"Mostly Adequate Guide"</a> ...to functional programming in JavaScript</li>
                      <li><a href="https://medium.com/@chetcorcos/functional-programming-for-javascript-people-1915d8775504">"Functional Programming for JavaScript People"</a></li>
                    </ul>
                  </section>
                </section>
                <section>
                  <section>
                    <h2>Build Tools</h2>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>Why do we need build tools for the web?</p>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p><strong>Reason 1:</strong> better code reusability</p>
                    <p>Here's an example of the old school way to build websites.</p>
                    <pre>
                      <code data-trim data-noescape class="language-html">
&lt;html&gt;
  &lt;head&gt;
    &lt;script src="jquery.js"&gt;&lt;/script&gt;
    &lt;script src="date-picker.js"&gt;&lt;/script&gt;
    &lt;script src="facebook-like-button.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="date-picker"&gt;&lt;/div&gt;
    &lt;div id="like-button"&gt;&lt;/div&gt;
    &lt;script&gt;
      window.DatePicker('date-picker')
      window.LikeButton('like-button')
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>The biggest problem is that we have a global namespace</p>
                    <pre>
                      <code data-trim data-noescape class="language-html">
&lt;script&gt;
  window.DatePicker('date-picker')
  window.LikeButton('like-button')
&lt;/script&gt;
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>What if our components depend on different versions of jQuery?</p>
                    <pre>
                      <code data-trim data-noescape class="language-html">
&lt;script src="jquery.js"&gt;&lt;/script&gt;
&lt;script src="date-picker.js"&gt;&lt;/script&gt;
&lt;script src="facebook-like-button.js"&gt;&lt;/script&gt;
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p><strong>Solution 1:</strong> let's use modules!</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const LikeButton = require('like-button')
const DatePicker = require('date-picker')

DatePicker('date-picker')
LikeButton('like-button')
                      </code>
                    </pre>
                    <p class="fragment">This is why we should be using <a href="https://www.npmjs.com/">NPM</a> instead of <a href="https://bower.io/">Bower</a></p>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>... but it this code doesn't work in the browser.</p>
                    <pre style="color:red; background-color: #eee; padding: 10px; padding-top: 25px; text-align: center;">
Uncaught ReferenceError: require is not defined
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>That's why we have module bundlers.</p>
                    <img src="https://webpack.github.io/assets/what-is-webpack.png" alt="what-is-webpack" height="50%">
                    <p class="fragment">There are lots of module bundlers but Webpack is the best!</p>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>Why is Webpack the best?</p>
                    <ul>
                      <li><a href="https://webpack.github.io/docs/loaders.html">asset loaders</a></li>
                      <li><a href="https://webpack.github.io/docs/list-of-plugins.html#defineplugin">compile-time feature flags</a></li>
                      <li><a href="https://webpack.github.io/docs/hot-module-replacement.html">hot-module replacement</a></li>
                      <li><a href="https://webpack.github.io/docs/multiple-entry-points.html">code splitting</a></li>
                      <li><a href="https://webpack.github.io/docs/code-splitting.html">async module loading</a></li>
                    </ul>
                    <p class="fragment">... but we'll touch on this later if we have time.</p>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p><strong>Reason 2:</strong> so we can use new language features.</p>
                    <p class="fragment">... and still support older browsers.</p>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>There are new JavaScript features</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// old school JavaScript
function variadicFunction() {
  var args = Array.prototype.slice.call(arguments) <span class="fragment">// oy</span>
  // ...
}

// new school JavaScript
function variadicFunction(...args) {
  // ...
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>There are new CSS features</p>
                    <pre>
                      <code data-trim data-noescape class="language-css">
/* old school CSS */
.grid {
  margin: -10px;
}

.grid .grid-item {
  margin: 10px;
}

/* new school CSS */
:root {
  --grid-padding: 10px;
}

.grid {
  margin: var(--grid-padding);

  &amp; .grid-item {
    margin: var(--grid-padding);
  }
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p><i>Transpilers</i> let us compile our new code into old code.</p>
                    <ul>
                      <li><a href="https://babeljs.io/">Babel</a> &mdash; JavaScript</li>
                      <li><a href="http://postcss.org/">PostCSS</a> &mdash; CSS</li>
                    </ul>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p><strong>Reason 3:</strong> find bugs and enforce best practices.</p>
                    <ul class="fragment">
                      <li>Linters &mdash; <a href="http://eslint.org/">ESLint</a> and <a href="http://stylelint.io/">Stylelint</a></li>
                      <li>Static Type Checkers &mdash; <a href="https://flowtype.org/">FlowType</a></li>
                    </ul>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>How do does <a href="http://eslint.org/">ESLint</a> help?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const inc = x => x + 1
inc(a) // error  "a" is not defined  no-undef

const person = {
  name: 'chet',
  age: 25 // error Missing trailing comma.  comma-dangle
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>How does <a href="http://stylelint.io/">Stylelint</a> help?</p>
                    <pre>
                      <code data-trim data-noescape class="language-css">
.btn {
  border-radus: 5px; /* Unexpected unknown property "border-radus"   property-no-unknown */
}
                      </code>
                    </pre>
                  </section>

                  <section>
                    <h2>Build Tools</h2>
                    <p>How does <a href="https://flowtype.org/">FlowType</a> help?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// @flow
function foo(x) {
  return x * 10;
}
foo('Hello, world!');

//  5: foo('Hello, world!');
//     ^^^^^^^^^^^^^^^^^^^^ function call
//  3:   return x * 10;
//              ^ string. This type is incompatible with
//  3:   return x * 10;
//              ^^^^^^ number
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Build Tools</h2>
                    <p>How does <a href="https://flowtype.org/">FlowType</a> help?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// @flow
type Status = 'active' | 'inactive'

type Person = {
  age: number,
  name?: string,
  status: Status,
}

const incAge = (person : Person) : Person => ({
  ...person,
  age: person.age + 1
})
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                    <p><a href="https://webpack.github.io/docs/loaders.html">Asset Loaders</a> let you manage all assets through JavaScript...</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
webpackConfig = {
  loaders: [
    {
      test: /\.js$/,
      loader: ['babel'],
    },
    {
      test: /\.css$/,
      loader: ['style', 'css', 'postcss'],
    },
  ]
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                    <p>... so you can import CSS to create modular components.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
import React from 'react'
import 'affirm/badge/style.css'

const Badge = (props) =>
  &lt;div className="badge"&gt;
    {props.children}
  &lt;/div&gt;

export default Badge
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                    <p><a href="https://webpack.github.io/docs/list-of-plugins.html#defineplugin">Feature Flags</a> lets you enable / disable development tools at compile-time.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
if (process.env.NODE_ENV === 'development') {
  const devtool = require('redux-devtool')
  devtool.configure()
}
if (process.env.NODE_ENV === 'production') {
  tracking.start()
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                    <p><a href="https://webpack.github.io/docs/hot-module-replacement.html">Hot Module Replacement</a> gives you blazingly fast rebuilds without having to refresh the browser.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const callback = event =>
  console.log(event)

window.events.subscribe(callback)

if (module.hot) {
  module.hot.accept()
  module.hot.dispose(() => {
    // cleanup any statefulness
    window.events.unsubscribe(callback)
  })
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                    <p><a href="https://webpack.github.io/docs/multiple-entry-points.html">Code Splitting</a> let's you break up your application into mutliple entry points.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
module.exports = {
  entry: {
    portal: "./src/portal.js",
    login: "./src/login.js",
  },
  output: {
    filename: "[name]-[hash].js",
  },
  plugins: [
    // and you can create a file with all the common code
    new webpack.optimize.CommonsChunkPlugin("common-[hash].js"),
  ],
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                    <p>Here's how you might use it.</p>
                    <pre>
                      <code data-trim data-noescape class="language-html">
&lt;!-- portal.html --&gt;
&lt;script src='portal-1ed1x3232w.js'&gt;
&lt;script src='common-djs39dn39s.js'&gt;

&lt;!-- login.html --&gt;
&lt;script src='login-sufnew3if8.js'&gt;
&lt;script src='common-djs39dn39s.js'&gt;
                      </code>
                    </pre>
                    <p class="fragment">But that's for the old school web!</p>
                  </section>
                  <section>
                    <h2>Appendix: Webpack</h2>
                    <p><a href="https://webpack.github.io/docs/code-splitting.html">Async Module Loading</a> let's you fetch source code on-demand.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
// routes.js

page('/login', async () => {
  render(&lt;Loading/&gt;)
  const Login = await System.load('./src/login')
  render(&lt;Login/&gt;)
})

page('/portal', async () => {
  render(&lt;Loading/&gt;)
  const Portal = await System.load('./src/portal')
  render(&lt;Portal/&gt;)
})
                      </code>
                    </pre>
                  </section>
                </section>
                <section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a> and <a href="redux.js.org">Redux</a></h2>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Let's build an vanilla counter component.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const Counter = (selector) => {
  let count = 0
  document.querySelector(selector).innerHtml = `
    &lt;div class="counter"&gt;
      &lt;label&gt;${count}&lt;/label&gt;
      &lt;button&gt;increment&lt;/button&gt;
    &lt;/div&gt;
  `
  const label = document.querySelector(selector + ' label')
  const button = document.querySelector(selector + ' button')
  button.addEventListener('click', () => {
    count++
    label.innerText = count
  })
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>And it works...</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const div = document.createElement('div')
div.id = 'my-counter'
document.body.appendChild(div)
Counter('#my-counter')
                      </code>
                    </pre>
                    <p class="fragment">... but is it useful?</p>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>What if you want to use this component in the outside world?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const Counter = (selector, {initialCount, delta, listener}) => {
  let count = initialCount || 0
  // ...
  const update = () => {
    label.innerText = count
    listener(count)
  }
  const increment = () => {
    count += delta || 1
    update()
  }
  button.addEventListener('click', increment)
  return {
    increment,
    getCount: () => count,
  }
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>And it works...</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const div = document.createElement('div')
div.id = 'my-counter'
document.body.appendChild(div)
const myCounter = Counter('#my-counter', {
  initialValue: 10,
  listener: count => console.log(count),
})
myCounter.getCount() // 10
myCounter.increment() // logs 11
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Suppose we want one counter to be the "delta" of the other counter.</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">

let myCounter = Counter('#my-counter', {
  initialValue: 0,
})
<span class="fragment">
const deltaCounter = Counter('#delta-counter', {
  initialValue: 1,
  listener: delta => {
    myCounter = Counter('#my-counter', {
      initialValue: myCounter.getValue(),
      delta,
    })
  },
})</span>
                      </code>
                    </pre>
                    <p class="fragment">User interfaces are hard to build and maintain!</p>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Why are user interfaces so hard to build?</p>
                    <ul>
                      <li>asynchronous</li>
                      <li>race conditions</li>
                      <li>imperative</li>
                    </ul>
                    <p class="fragment">Let's just skip ahead...</p>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>What is React?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const Counter = (props) =>
  &lt;div className="counter"&gt;
    &lt;span&gt;{props.count}&lt;/span&gt;
    &lt;button onClick={props.onIncrement}&gt;increment&lt;/button&gt;
  &lt;/div&gt;
                      </code>
                    </pre>
                    <ul>
                      <li>a declarative renderer</li>
                      <li>efficient DOM updates</li>
                      <li>sanitized event system</li>
                      <li>HTML flavored syntax called JSX</li>
                    </ul>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Demystifying JSX</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const Counter = (props) =>
  &lt;div className="counter"&gt;
    &lt;span&gt;{props.count}&lt;/span&gt;
    &lt;button onClick={props.onIncrement}&gt;increment&lt;/button&gt;
  &lt;/div&gt;
                      </code>
                      <code data-trim data-noescape class="language-js">
const Counter = (props) =>
  React.createElement('div', {className: 'counter'},
    React.createElement('span', {}, props.count),
    React.createElement('button', {onClick: props.onIncrement}, 'increment')
  )
                      </code>
                    </pre>
                    <p class="fragment">... this just creates a "virtual DOM" tree</p>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Because it's declarative, we can have different renderers!</p>
                    <ul>
                      <li><a href="https://www.npmjs.com/package/react-dom">DOM</a></li>
                      <li><a href="https://github.com/Flipboard/react-canvas">HTML5 Canvas</a></li>
                      <li><a href="https://github.com/toxicFork/react-three-renderer">WebGL</a></li>
                      <li><a href="https://facebook.github.io/react-native/">iOS, and Android</a></li>
                      <li><a href="https://github.com/Yomguithereal/react-blessed">Terminal</a></li>
                    </ul>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Did you say Terminal?!</p>
                    <img src="assets/blessed1.gif" alt="blessed-1">
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <img src="assets/blessed2.gif" alt="blessed-2">
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Let's add some counter logic</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
import ReactDOM from 'react-dom'

let count = 0
const onIncrement = () => {
  count++
  loop()
}

const root = document.getElementById('root')
const loop = () => {
  ReactDOM.render(
    &lt;Counter count={count} onIncrement={onIncrement}/&gt;,
    root
  )
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>How about the delta counters example?</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
let count = 0
let delta = 1
const onIncrementCount = () => {
  count += delta
  loop()
}
const onIncrementDelta = () => {
  delta++
  loop()
}
const loop = () => {
  const root = document.getElementById('root')
  ReactDOM.render(
    &lt;div&gt;
      &lt;Counter count={delta} onIncrement={onIncrementDelta}/&gt;
      &lt;Counter count={count} onIncrement={onIncrementCount}/&gt;
    &lt;/div&gt;,
    root
  )
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>This is bad...</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
let count = 0
let delta = 1
const onIncrementCount = () => {
  count += delta
  loop()
}
const onIncrementDelta = () => {
  delta++
  loop()
}
                      </code>
                    </pre>
                    <ul class="fragment">
                      <li>mutations</li>
                      <li>side-effects</li>
                      <li>imperative</li>
                    </ul>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Let's try to be more declarative</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const initialState = {
  count: 0,
  delta: 1,
}

const update = (state, action) => { <span class="fragment">// looks like a reducing function!</span>
  if (action === 'increment/count') {
    return {
      ...state,
      count: state.count + state.delta,
    }
  }
  if (action === 'increment/delta') {
    return {
      ...state,
      delta: state.delta + 1,
    }
  }
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="https://facebook.github.io/react/">React</a></h2>
                    <p>Let's wire it up!</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
const start = (initialState, update, loop) => {
  let state = initialState
  const dispatch = (action) => {
    state = update(state, action)
    loop(state, dispatch)
  }
  loop(state, dispatch)
}

const loop = (state, dispatch) => {
  const onIncrementDelta = () => dispatch('increment/delta')
  const onIncrementCount = () => dispatch('increment/count')
  ReactDOM.render(
    &lt;div&gt;
      &lt;Counter count={state.delta} onIncrement={onIncrementDelta}/&gt;
      &lt;Counter count={state.count} onIncrement={onIncrementCount}/&gt;
    &lt;/div&gt;,
    root
  )
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="redux.js.org">Redux</a></h2>
                    <p>That's the concept of <a href="redux.js.org">Redux</a>!</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
import { createStore } from 'redux'

const initialState = { count: 0 }

const reducer = (state=initialState, action) => {
  switch(action.type) {
    case 'increment':
      return {
        ...state,
        count: state.count + 1,
      }
  }
}

const store = createStore(reducer)

store.getState() // { count: 0 }
store.dispatch({type: 'increment'})
store.getState() // { count: 1 }
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="redux.js.org">Redux</a></h2>
                    <p>Additional perks with Redux</p>
                    <ul>
                      <li>Track user actions all in one place</li>
                      <li>Render any page / state of your application easily</li>
                      <li>Easily reproduce any sequence interactions</li>
                      <li>Easy to introspect what's going on in your application</li>
                    </ul>
                  </section>
                  <section>
                    <h2><a href="redux.js.org">Redux</a></h2>
                    <p>Middleware let's you get inbetween dispatch and the reducer</p>
                    <pre>
                      <code data-trim data-noescape class="language-js">
import track from 'shared/src/scripts/analytics/tracking'
import scrub from 'shared/src/scripts/analytics/scrub'

const middleware = store => next => action => {
  track.event('redux_action', { action: scrub(action) })
  return next(action)
}
                      </code>
                    </pre>
                  </section>
                  <section>
                    <h2><a href="redux.js.org">Redux</a></h2>
                    <p>Redux DevTool demo</p>
                    <img class="large" src="assets/time-travel.png" alt="time-travel" style="height:60%;">
                  </section>
                </section>
              </section>
              <section>
                <section>
                  <h2>Styleguide</h2>
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>What is the Styleguide?</p>
                  <ul>
                    <li>an application demonstrating UI components</li>
                    <li>components are reusable and modular</li>
                    <li>components are don't contain any business logic</li>
                  </ul>
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Demo</p>
                  <img src="assets/styleguide.png" alt="styleguide">
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Why have <a href="#"></a> Styleguide?</p>
                  <p>To create a cohesive and consistent user experience across all of our applications so that user's can come become comfortable and familiar with interacting with our products.</p>
                  <br>
                  <p class="fragment">Components are motivated by UX requirements not product requirements!</p>
                  </ul>
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Lets build a "progress" component:</p>
                  <img src="assets/progress.png" alt="progress-example">
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>First ask why!</p>
                  <ul>
                    <li>What intent is this component supposed to convey to the user?</li>
                    <li>Is there an existing component that conveys the same intent?</li>
                    <li><strong>Don't create a new component just because its in the product spec!</strong></li>
                  </ul>
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Create the index.js and style.css files</p>
                  <img src="assets/file-structure.png" alt="file-structure">
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Build the component</p>
                  <pre>
                    <code data-trim data-noescape class="language-js">
// affirm/progress/index.js

import React from 'react'
import 'affirm/progress/style.css'
<span class="fragment">
const Progress = (props) => {
  const width = `${props.percent}%`
  return (
    &lt;div className="progress-bar"&gt;
      &lt;div className="progress-bar__fill" style={{ width }}/&gt;
    &lt;/div&gt;
  )
}
</span><span class="fragment">
Progress.propTypes = {
  percent: React.PropTypes.number.isRequired,
}
</span><span class="fragment">
export default Progress
</span>

                    </code>
                  </pre>
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Style the component</p>
                  <pre>
                    <code data-trim data-noescape class="language-css">

/* affirm/progress/style.js */

@import 'affirm/styles/base';
<span class="fragment">
.progress-bar {
  width: 100%;
  height: var(--spacing-small);
  border-radius: var(--border-radius);
  background-color: var(--black-10);
  margin-bottom: var(--spacing-large);
}

.progress-bar__fill {
  height: 100%;
  background-color: var(--indigo);
  border-radius: var(--border-radius);
}
</span>

                    </code>
                  </pre>
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Please use <a href="https://css-tricks.com/bem-101/">BEM CSS naming conventions</a>!</p>
                  <pre>
                    <code data-trim data-noescape class="language-css">

/* Block component */
.btn {}

/* Element that depends upon the block */
.btn__price {}

/* Modifier that changes the style of the block */
.btn--orange {}
.btn--big {}

                    </code>
                  </pre>
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Now let's create a guide in the Styleguide</p>
                  <img src="assets/progress-guide.png" alt="progress-guide" style="height: 40vh;">
                </section>
                <section>
                  <h2>Styleguide</h2>
                  <p>Define a guide demoing the component</p>
                  <pre>
                    <code data-trim data-noescape class="language-js">
import React from 'react'
import Guide from 'styleguide/src/guide'
import Progress from 'affirm/progress'

const ProgressBars = () =&gt;
  &lt;Guide title="Progress"&gt;
    &lt;Guide.Section title="Guidelines"&gt;
      &lt;p&gt;Use this progress indicator do show a percentage of completion.&lt;/p&gt;
    &lt;/Guide.Section&gt;
    &lt;Guide.Section title="Progress"&gt;
      &lt;Progress percent={0}/&gt;
      &lt;Progress percent={25}/&gt;
      &lt;Progress percent={50}/&gt;
      &lt;Progress percent={75}/&gt;
      &lt;Progress percent={100}/&gt;
    &lt;/Guide.Section&gt;
  &lt;/Guide&gt;

export default ProgressBars
                    </code>
                  </pre>
                </section>
              </section>
            </div>
        </div>
        <script src="assets/reveal.js/lib/js/head.min.js"></script>
        <script src="assets/reveal.js/js/reveal.js"></script>
        <script>
            Reveal.initialize({
              history: true,
              dependencies: [
                // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
                { src: 'assets/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },

                // Interpret Markdown in <section> elements
                { src: 'assets/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'assets/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },

                // Syntax highlight for <code data-trim data-noescape class="language-js"> elements
                { src: 'assets/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },

                // Zoom in and out with Alt+click
                { src: 'assets/reveal.js/plugin/zoom-js/zoom.js', async: true },

                // Speaker notes
                { src: 'assets/reveal.js/plugin/notes/notes.js', async: true },

                // MathJax
                { src: 'assets/reveal.js/plugin/math/math.js', async: true }
              ]
            });
        </script>
    </body>
</html>
